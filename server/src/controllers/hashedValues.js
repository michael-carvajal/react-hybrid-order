const crypto = require('crypto');

const hashedData = "436fbdb4ef44332c2dee96b7f9271b48b73a4178cf3be3cb443f2b158d3becc828ca724ca7c3da67d42aee4e8a4309ee128b55207be7e17e725011dabc68bf400a10f6e4c13a3a37350b65b9f6d00b511c7ba009faa1014234ecd529dbaaf368fc0270851086a617b641304b0f0b2cf77c7ce8e9df6023e53e4591c4802b67a1e4c1916e433873630aaa8b882aadc9a50ee0356b3ce847fef32d84133ad31673f2bbb694b1e642605a52bf804e7166553743846f5690a1909dc76beaa46d5d8b5ef0dc74e63f2763ceff74ad301794f6d8e5435884cd33bc0fb2de7c89e502f7b9fbcfeb8cd437e8be7dbb36c2b30eadbd684087e690a65bf561545ca86cbc743a210984d44c8338872f339d27244f9ed38a57aefb6b9ded01c368ca761ed5cb57079650cfe6c99efe301cc4ca887a312f91d142ee8a38c949611b2185fd0692dc777a63c40da376ce3f3218a91a3afef2dbe7efaec58a9dd5920661c8aac0b0da8c1adfebbe32ae67ae85331181a32ee72f8f2ee499a65256a1adb64008c681295a892ecfb7511468f6006944768c0643e5dd6b3718939bba8710e728fedf118f09b999a7a25bcb11b414bca766807913fc2e5b91621a6e6cd7fecab21e6c1feec06b7a63a81f7ca07089332cbe2c7d6b2e8f634743d92d6d6ee201450d8daf9a44df62e6f1f0d26881171d6842960d0a2566aadfec93f7850227b6fba3e9bbbaea1ae5db0338276b63bd1b30d5b4d677d796205f569f6e51e4500819cddb2574b633b93557cb5404d89e5288077672c942e92f8e0e3fad6b59a09999ca9ba6069b902b1e081c02b8fd60ce5d8fe446c8100c2666a29bd329a898112ef1560b1b67fd5d9954569ba824760c37252912943e8de43848bbde04d84d072b0de9850c01e458a7ccb3f07c272291b000de9c38ccb7887b7658dd665d66063eda383d0b1df96c18828b44fb14e8f8f1aa65c8255a2e99b2df1053780d49c6cc5c118fd70b1a4184cf04ad00a4fbbcf0c5250ead491dea659ad2b5341766c091566f2b283f7002835ddf3d82b7449eeaaa7b8c222c43bac41191592a91b7feb4bfcd80e309cda49f5dd8b83fe772f85f5a3e8d3c3e0c6c0935867a244cea75d9812a8ba828de177486a04fdbdd83e005c8d78b37b0e9ec9a99b5beff7bf01a3e06938833059c3a7ed9ccbdf21a9a71da8cda3f5ef64650d52d52fc2dbf8e35c62801e7a582906e47164d1672b35b06d9aa1db31f50a8f6e98c42c88c9a5ef2ea9e3fe10bd74abce8c16582ce1a0260eda596c14cd6c5fa7d3a8891d7abcc47be4ba6ecf5e72890fb6a03c3951b586a2e5ce3688f623c8a77b0574170cd710687fb1c37ba293bc726ef656d4faa50386dbc47e379f6f94f80ed3c0f983ac12db871da18197553a9f2c4b306f915199224c8c925eaa4275fee7ce508a3c3f753d9dc9c13"
const iv = "dc92b1da224b528dc16e41b3ee87f0c3"

function decryptHashedValues(encryptedData, iv, key) {
  const algorithm = "aes-256-cbc";
  const decipher = crypto.createDecipheriv(algorithm, Buffer.from(key), Buffer.from(iv, 'hex'));
  let decryptedData = decipher.update(encryptedData, "hex", "utf8");
  decryptedData += decipher.final("utf8");
  return JSON.parse(decryptedData);
}

// function deriveKey(password, salt, iterations, keylen) {
//   return crypto.pbkdf2Sync(password, salt, iterations, keylen, 'sha256');
// }

// const key = deriveKey('juan_rocks_123', 'salt', 100000, 32); // Adjust salt and iterations as needed
// console.log('Derived key:', key.toString('hex'));
// const decryptedValues = decryptHashedValues(encryptedData=hashedData, iv, key);
// console.log("Decrypted Values:", decryptedValues);

module.exports = {hashedData, iv, decryptHashedValues};